<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calendario Azteco - Analisi e Strumenti</title>
  <style>
    /* Reset e transizioni */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #e0e0e0;
      padding: 20px;
      line-height: 1.6;
      text-align: center;
    }
    body.light-theme {
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
      padding: 20px;
    }
    .section {
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.8);
    }
    body.light-theme .section {
      background: #fff;
      border: 1px solid #ccc;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }
    h1, h2 {
      margin-bottom: 15px;
    }
    p {
      margin-bottom: 10px;
      font-size: 1rem;
    }
    input[type="date"],
    input[type="number"],
    input[type="text"],
    select,
    button {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 10px;
      font-size: 1rem;
      border: 1px solid #555;
      border-radius: 5px;
      background-color: #2c2c2c;
      color: #e0e0e0;
      text-align: center;
    }
    body.light-theme input,
    body.light-theme select,
    body.light-theme button {
      background-color: #e0e0e0;
      color: #333;
      border: 1px solid #ccc;
    }
    button {
      background: #333;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #444;
    }
    #result, #searchResults, #liveConversion, #astroData, #sumResult, #astroEvents {
      margin-top: 10px;
    }
    .theme-toggle {
      text-align: right;
      margin-bottom: 10px;
    }
    /* Stili per la griglia del glossario */
    .glossary-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .glossary-item {
      width: 80px;
      cursor: pointer;
    }
    .glossary-item img {
      width: 100%;
      border-radius: 5px;
      border: 1px solid #555;
    }
    .glossary-item span {
      font-size: 0.8rem;
      display: block;
      margin-top: 5px;
    }
    /* Modal per il glossario */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
    }
    .modal-content {
      background-color: #1e1e1e;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      max-width: 400px;
      border-radius: 10px;
      text-align: left;
    }
    body.light-theme .modal-content {
      background-color: #fff;
      color: #333;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover,
    .close:focus {
      color: #fff;
      text-decoration: none;
    }
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      .container {
        padding: 10px;
      }
      input, select, button {
        padding: 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <div class="theme-toggle">
    <label for="themeSwitch">Tema chiaro</label>
    <input type="checkbox" id="themeSwitch">
  </div>
  <div class="container">
    <!-- Sezione Conversione Live del Giorno -->
    <div class="section" id="liveConversionSection">
      <h2>Conversione Live del Giorno</h2>
      <div id="liveConversion">Caricamento conversione live...</div>
    </div>

    <!-- Sezione Convertitore Calendario -->
    <div class="section" id="converterSection">
      <h1>Convertitore Calendario</h1>
      <p>Inserisci una data del calendario gregoriano:</p>
      <input type="date" id="inputDate">
      <button id="convertButton">Converti</button>
      <div id="result"></div>
    </div>

    <!-- Nuova Sezione: Somma Conversioni di Due Date -->
    <div class="section" id="sumSection">
      <h2>Somma Conversioni di Due Date</h2>
      <p>Inserisci la prima data:</p>
      <input type="date" id="firstDate">
      <p>Inserisci la seconda data:</p>
      <input type="date" id="secondDate">
      <button id="sumButton">Calcola Somma</button>
      <div id="sumResult"></div>
    </div>

    <!-- Sezione Cerca Date per Numero di Destino e Filtri -->
    <div class="section" id="destinySearchSection">
      <h2>Cerca Date per Numero di Destino e Filtri</h2>
      <p>Scegli criterio filtro:</p>
      <select id="filterCriterion">
         <option value="">-- Seleziona criterio --</option>
         <option value="destiny">Numero Destino</option>
         <option value="civilDay">Giorno Civile</option>
         <option value="civilMonth">Mese Civile</option>
         <option value="sacredDay">Giorno Sacro</option>
         <option value="sacredSymbol">Simbolo Sacro</option>
      </select>
      <div id="filterInputArea"></div>
      <p>Data Iniziale:</p>
      <input type="date" id="startDate">
      <p>Data Finale:</p>
      <input type="date" id="endDate">
      <button id="searchButton">Cerca Date</button>
      <div id="searchResults"></div>
    </div>

    <!-- Sezione Dati Astronomici Live -->
    <div class="section" id="astroSection">
      <h2>Dati Astronomici Live</h2>
      <div id="astroData">Caricamento dati astronomici...</div>
    </div>

    <!-- Sezione Eventi Astronomici -->
    <div class="section" id="astroEventsSection">
      <h2>Eventi Astronomici</h2>
      <button id="loadEventsButton">Carica Eventi</button>
      <div id="astroEvents">Caricamento eventi...</div>
    </div>

    <!-- Nuova Sezione: Confronto tra Calendari -->
    <div class="section" id="calendarsComparison">
      <h2>Confronto tra Calendari</h2>
      <p>
        <strong>Tonalpohualli (260 giorni):</strong> Il calendario rituale azteco composto da 20 simboli e numeri da 1 a 13, usato per determinare i rituali e le cerimonie.
      </p>
      <p>
        <strong>Xiuhpohualli (365 giorni):</strong> Il calendario solare, suddiviso in 18 mesi di 20 giorni più 5 giorni infausti, usato per le attività agricole e la vita quotidiana.
      </p>
      <p>
        La combinazione dei due cicli genera un ciclo di 52 anni, in cui i calendari si riallineano. Questo "ritorno dei 52 anni" era di fondamentale importanza per le cerimonie e la cosmologia azteca.
      </p>
      <!-- Puoi sostituire questo semplice diagramma con animazioni o SVG interattivi in futuro -->
      <div style="margin: 20px auto; max-width: 600px; padding: 10px; border: 1px solid #555; border-radius: 10px;">
        <p><em>Diagramma a blocchi</em></p>
        <p>Tonalpohualli (260 gg)  |  Xiuhpohualli (365 gg)</p>
        <p>Riallineamento ogni 52 anni</p>
      </div>
    </div>

    <!-- Nuova Sezione: Simbologia e Mitologia -->
    <div class="section" id="glossarySection">
      <h2>Simbologia e Mitologia</h2>
      <p>Clicca su ciascun simbolo per conoscere il suo significato, la relativa deità e il mito associato.</p>
      <div class="glossary-grid">
        <!-- L'ordine segue quello dell'array sacredDayNames -->
        <div class="glossary-item" data-symbol="Cipactli (Coccodrillo)">
          <img src="calendarioc1/.github/Coccodrillo.png" alt="Coccodrillo">
          <span>Cipactli</span>
        </div>
        <div class="glossary-item" data-symbol="Ehecatl (Vento)">
          <img src="calendarioc1/.github/Vento.png" alt="Vento">
          <span>Ehecatl</span>
        </div>
        <div class="glossary-item" data-symbol="Calli (Casa)">
          <img src="calendarioc1/.github/Casa.png" alt="Casa">
          <span>Calli</span>
        </div>
        <div class="glossary-item" data-symbol="Cuetzpalin (Lucertola)">
          <img src="calendarioc1/.github/Lucertola.png" alt="Lucertola">
          <span>Cuetzpalin</span>
        </div>
        <div class="glossary-item" data-symbol="Coatl (Serpente)">
          <img src="calendarioc1/.github/Serpente.png" alt="Serpente">
          <span>Coatl</span>
        </div>
        <div class="glossary-item" data-symbol="Miquiztli (Morte)">
          <img src="calendarioc1/.github/Morte.png" alt="Morte">
          <span>Miquiztli</span>
        </div>
        <div class="glossary-item" data-symbol="Mazatl (Cervo)">
          <img src="calendarioc1/.github/Cervo.png" alt="Cervo">
          <span>Mazatl</span>
        </div>
        <div class="glossary-item" data-symbol="Tochtli (Coniglio)">
          <img src="calendarioc1/.github/Coniglio.png" alt="Coniglio">
          <span>Tochtli</span>
        </div>
        <div class="glossary-item" data-symbol="Atl (Acqua)">
          <img src="calendarioc1/.github/Acqua.png" alt="Acqua">
          <span>Atl</span>
        </div>
        <div class="glossary-item" data-symbol="Itzcuintli (Cane)">
          <img src="calendarioc1/.github/Cane.png" alt="Cane">
          <span>Itzcuintli</span>
        </div>
        <div class="glossary-item" data-symbol="Ozomahtli (Scimmia)">
          <img src="calendarioc1/.github/Scimmia.png" alt="Scimmia">
          <span>Ozomahtli</span>
        </div>
        <div class="glossary-item" data-symbol="Malinalli (Erba)">
          <img src="calendarioc1/.github/Erba.png" alt="Erba">
          <span>Malinalli</span>
        </div>
        <div class="glossary-item" data-symbol="Acatl (Canna)">
          <img src="calendarioc1/.github/Canna.png" alt="Canna">
          <span>Acatl</span>
        </div>
        <div class="glossary-item" data-symbol="Ocelotl (Giaguaro)">
          <img src="calendarioc1/.github/Giaguaro.png" alt="Giaguaro">
          <span>Ocelotl</span>
        </div>
        <div class="glossary-item" data-symbol="Cuauhtli (Aquila)">
          <img src="calendarioc1/.github/Aquila.png" alt="Aquila">
          <span>Cuauhtli</span>
        </div>
        <div class="glossary-item" data-symbol="Cozcacuauhtli (Avvoltoio)">
          <img src="calendarioc1/.github/Avvoltoio.png" alt="Avvoltoio">
          <span>Cozcacuauhtli</span>
        </div>
        <div class="glossary-item" data-symbol="Ollin (Movimento)">
          <img src="calendarioc1/.github/Movimento.png" alt="Movimento">
          <span>Ollin</span>
        </div>
        <div class="glossary-item" data-symbol="Tecpatl (Selce)">
          <img src="calendarioc1/.github/Selce.png" alt="Selce">
          <span>Tecpatl</span>
        </div>
        <div class="glossary-item" data-symbol="Quiahuitl (Pioggia)">
          <img src="calendarioc1/.github/Pioggia.png" alt="Pioggia">
          <span>Quiahuitl</span>
        </div>
        <div class="glossary-item" data-symbol="Xochitl (Fiore)">
          <img src="calendarioc1/.github/Fiore.png" alt="Fiore">
          <span>Xochitl</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal per il glossario -->
  <div id="glossaryModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="modalTitle">Titolo</h2>
      <img id="modalImage" src="" alt="" style="width:100%; border-radius: 5px;">
      <p id="modalDescription">Descrizione del simbolo e informazioni mitologiche...</p>
    </div>
  </div>

  <script>
    // Tema chiaro/scuro
    document.getElementById("themeSwitch").addEventListener("change", function() {
      if(this.checked) {
        document.body.classList.add("light-theme");
      } else {
        document.body.classList.remove("light-theme");
      }
    });

    /* --- Codice già presente per conversione, somma, ricerca e dati astronomici --- */
    // (Inserisci qui le funzioni computeConversion, updateLiveConversion, updateAstroData, ecc. già definite nelle versioni precedenti)
    // Per brevità non le ripropongo qui, ma il loro codice va mantenuto intatto.

    /* --- Glossario Interattivo --- */
    // Array con descrizioni (placeholder) per ciascun simbolo; personalizza le descrizioni in base alle tue fonti.
    const symbolDetails = {
      "Cipactli (Coccodrillo)": "Simbolo del coccodrillo, rappresenta la forza primordiale e la creazione.",
      "Ehecatl (Vento)": "Simbolo del vento, associato a Ehecatl, il dio del vento e dell'aria.",
      "Calli (Casa)": "Simbolo della casa, rappresenta il rifugio e la famiglia.",
      "Cuetzpalin (Lucertola)": "Simbolo della lucertola, legato alla vitalità e al movimento.",
      "Coatl (Serpente)": "Simbolo del serpente, emblema di trasformazione e rinnovamento.",
      "Miquiztli (Morte)": "Simbolo della morte, riflette il ciclo della vita e della rinascita.",
      "Mazatl (Cervo)": "Simbolo del cervo, associato alla grazia e alla natura.",
      "Tochtli (Coniglio)": "Simbolo del coniglio, legato alla fertilità e alla rinascita.",
      "Atl (Acqua)": "Simbolo dell'acqua, elemento vitale e purificatore.",
      "Itzcuintli (Cane)": "Simbolo del cane, fedele compagno e guida spirituale.",
      "Ozomahtli (Scimmia)": "Simbolo della scimmia, rappresenta l'intelligenza e l'adattabilità.",
      "Malinalli (Erba)": "Simbolo dell'erba, associato alla natura e alla rinascita.",
      "Acatl (Canna)": "Simbolo della canna, legato all'abbondanza e alla crescita.",
      "Ocelotl (Giaguaro)": "Simbolo del giaguaro, emblema di forza e potere.",
      "Cuauhtli (Aquila)": "Simbolo dell'aquila, rappresenta la visione e il coraggio.",
      "Cozcacuauhtli (Avvoltoio)": "Simbolo dell'avvoltoio, collegato alla trasformazione e al ciclo della vita.",
      "Ollin (Movimento)": "Simbolo del movimento, indicativo del cambiamento costante.",
      "Tecpatl (Selce)": "Simbolo della selce, associato al potere e alla forza rituale.",
      "Quiahuitl (Pioggia)": "Simbolo della pioggia, fondamentale per la fertilità della terra.",
      "Xochitl (Fiore)": "Simbolo del fiore, emblema della bellezza e della rinascita."
    };

    // Modal e gestione glossario
    const modal = document.getElementById("glossaryModal");
    const modalTitle = document.getElementById("modalTitle");
    const modalImage = document.getElementById("modalImage");
    const modalDescription = document.getElementById("modalDescription");
    const closeModal = document.getElementsByClassName("close")[0];

    document.querySelectorAll(".glossary-item").forEach(item => {
      item.addEventListener("click", () => {
        const symbol = item.getAttribute("data-symbol");
        modalTitle.textContent = symbol.split(" (")[0];
        // Imposta l'immagine in base al simbolo: usa lo stesso src dell'elemento cliccato
        modalImage.src = item.querySelector("img").src;
        modalImage.alt = symbol;
        modalDescription.textContent = symbolDetails[symbol] || "Descrizione non disponibile.";
        modal.style.display = "block";
      });
    });

    closeModal.onclick = function() {
      modal.style.display = "none";
    }
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
</body>
</html>
